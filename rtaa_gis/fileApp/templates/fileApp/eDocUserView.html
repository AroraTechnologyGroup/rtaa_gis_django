{% extends "home/AppLoader.html" %}
{% load static %}
{% load rest_framework %}

{% block stylesheets %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{%  static 'fileApp/viewer.css' %}"/>
{% endblock %}

{% block content %}
    <div id="_outer_div">
        <form action="{% url 'fileApp:eDoc' %}" method="post">
        {% csrf_token %}
            <div id="_placed_panel">
                <div id="_buttons">
                    <span>
                        <button id="_file_type_handle" class="btn btn-clear">File Types</button>
                    </span>
                    <span>
                        <button id="_doc_type_handle" class="btn btn-clear">Doc Types</button>
                    </span>
                     <span>
                        <button id="_map_handle" class="btn btn-clear">Map</button>
                    </span>
                    <span>
                        <button id="_reset_handle" formmethod="get" href="{% url 'fileApp:eDoc' %}" class="btn btn-clear">Reset</button>
                    </span>
{#                    {% if 'Arora' in groups or '_RTAA_GIS' in groups %}#}
                    <span>
                        <button id="_edit_handle" class="btn btn-clear">Update</button>
                    </span>
                    <span>
                        <button id="_batch_edit_handle" class="btn btn-clear">Batch Update</button>
                    </span>
{#                    {% endif %}#}
                </div>
                <div id="_filter_group">
                    <input class="btn btn-fill" type="submit" value="Submit" />
                    {% for field in filter_form %}
                        {% if field.name != 'grid_cells' and field.name != 'file_type' and field.name != 'document_type' and field.name != 'image_type' and field.name != 'table_type' and field.name != 'gis_type'%}
                             <div class="fieldWrapper">
                                {{ field.errors }}
                                {{ field.label_tag }} {{ field }}
                                {% if field.help_text %}
                                <p class="help">{{ field.help_text|safe }}</p>
                                {% endif %}
                            </div>
                        {% endif %}
                    {% endfor %}
                    <input class="btn btn-fill" type="submit" value="Submit" />
                </div>
            </div>

            <div id="_container">
                <div id="_slider_panel">
                    <div id="_slider_flex_container">
                        <div id="_file_type_group" class="panel_slide">
                            {% for field in filter_form %}
                                {% if field.name == 'file_type' or field.name == 'image_type' or field.name == 'table_type' or field.name == 'gis_type'%}
                                    <div class="fieldWrapper">
                                        {{ field.errors }}
                                        {{ field.label_tag }} {{ field }}
                                        {% if field.help_text %}
                                        <p class="help">{{ field.help_text|safe }}</p>
                                        {% endif %}
                                    </div>
                                {% endif %}
                            {% endfor %}
                            <input class="btn btn-fill" type="submit" value="Submit" />
                        </div>

                        <div id="_doc_type_group" class="panel_slide">
                            {% for field in filter_form %}
                                {% if field.name == 'document_type' %}
                                    <div class="fieldWrapper">
                                        {{ field.errors }}
                                        {{ field.label_tag }} {{ field }}
                                        {% if field.help_text %}
                                        <p class="help">{{ field.help_text|safe }}</p>
                                        {% endif %}
                                    </div>
                                {% endif %}
                            {% endfor %}
                            <input class="btn btn-fill" type="submit" value="Submit" />
                        </div>

                        <div id="_grid_group" class="panel_slide">
                            <div id="_mapDiv"></div>
                            <div class="_file_types">
                                {% for field in filter_form %}
                                    {% if field.name == 'grid_cells' %}
                                        <div class="fieldWrapper">
                                            {{ field.errors }}
                                            {{ field.label_tag }} {{ field }}
                                            {% if field.help_text %}
                                            <p class="help">{{ field.help_text|safe }}</p>
                                            {% endif %}
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <input class="btn btn-fill" type="submit" value="Submit" />
                        </div>
                    </div>
                </div>
                <div id="_resultBox">
                    {% for file in efiles %}
                        <div class="fileIcon {{ file.file_type }}">{{ file.base_name }}</div>
                    {% endfor %}
                </div>
            </div>
        </form>
        <form action='/fileApp/eng-files/' method="post">
            {% csrf_token %}
            <div id="_update_panel">
                <input class="btn btn-fill" type="submit" value="Save" />
                    {% render_form edit_form template_pack='rest_framework/vertical' %}
                <input class="btn btn-fill" type="submit" value="Save" />
            </div>
        </form>
    </div>
{% endblock %}

{% block footer %}
    {{ block.super }}
{% endblock %}

{% block scripts %}
    {% include 'fileApp/eDocUserView_scripts.html' %}
{% endblock %}